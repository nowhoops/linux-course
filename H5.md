

# Yes it is dns.
**Author:** [whoops]  
**Date:** [22.9.2025]  
**Course:** Linux Systems and Networking  

---
**I had to set up a new web server because my previous one was deleted after the trial period ended. I recreated it as closely as possible to the setup from Task 4."**

## a) Public Domain Name

- For this assignment, I used my existing domain: **heema.fi**
- Opened the DNS management panel.
- Added Domain type A and Correct ip

<img width="985" height="145" alt="image" src="https://github.com/user-attachments/assets/a9dc4a9b-b8b7-4a79-9e6a-7f242a2047a5" />



---

## b) Subdomains
##### I created two subdomains that both point to my main domain:
- Opened the DNS management panel again.
- Pressed “Add new record” and added the following entries:
- whoops.heema.fi — CNAME record pointing to heema.fi
- hats.heema.fi — A record pointing to my server IP 
  
- Was as easy as the first part
- Both subdomains resolve to the same IP address as the main domain, and they currently serve the same content. The subdomains were configured using two different DNS record types:
  
<img width="947" height="179" alt="image" src="https://github.com/user-attachments/assets/c6c90b10-4488-4406-a458-17b0aa7bbe0c" />




### a) (again)
I removed old configs from domain managements site.

```bash
- I created a configuration file at:  
sudo nano /etc/apache2/sites-available/heema.fi.conf
```
```bash
<VirtualHost *:80>
    ServerName heema.fi
    ServerAlias www.heema.fi info.heema.fi
    DocumentRoot /var/www/heema.fi

    <Directory /var/www/heema.fi>
        Options -Indexes
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/heema_error.log
    CustomLog ${APACHE_LOG_DIR}/heema_access.log combined
</VirtualHost>
```

- Then I created the directory structure defined in the configuration:

```bash
sudo mkdir -p /var/www/heema.fi
sudo nano /var/www/heema.fi/index.html
```

```bash
curl http://heema.fi
```
- I did not get my website content. Instead, Apache returned a directory listing showing the contents of /var/www/html, including a file called index.html.copy.
#### This was unexpected because:
- My index.html was located in /var/www/heema.fi.
- Apache was serving it from /var/www/html.
#### Solving it:
- Checked contents of both /var/www/heema.fi and /var/www/html directories.
- Confirmed /var/www/heema.fi/index.html existed and contained my intended website content.
- Noticed that Apache was still serving the default site (/var/www/html) instead of my configured virtual host.
 
##### 1. Enabled my virtual host configuration:
```bash
sudo a2ensite heema.fi.conf
```
##### 2. Disabled the default Apache site to prevent conflicts:
```bash
sudo a2dissite 000-default.conf
```
##### 3.Cleaned up unnecessary files in /var/www/html:
```bash
sudo rm /var/www/html/index.html.copy
```
And now:
`curl http://heema.fi` 
gives the correct html

---

### c) DNS Lookup: Using `host` and `dig`

I performed DNS lookups on the following domains using both `host` and `dig`:

1. **My own domain** - `heema.fi`
2. **A small organization** - `porinpaahtimo.fi` 
3. **A well-known service** - `www.lttstore.com`

### Tools Used

* `host` – a simple DNS lookup utility
* `dig` – more detailed and flexible DNS query tool

### Example Results

#### 1. My Domain: `heema.fi`

**Using `host`:**

```bash
$ host heema.fi
exampledomain.com has address 93.184.216.34
```
<img width="493" height="47" alt="image" src="https://github.com/user-attachments/assets/18d78f7b-826f-49de-84af-7dcfb928b373" />

**Using `dig`:**

```bash
$ dig heema.fi ANY
```
<img width="691" height="395" alt="image" src="https://github.com/user-attachments/assets/657c624b-bc56-408d-a96e-32229a0eef32" />

##### analyzed:
- A record – 94.237.39.137 (the IPv4 address for heema.fi)
- MX record – mail is handled by mail05.domainhotelli.fi with priority 0

- It is as it should be there is a mx and A record I haven't added anyting else
```bash
  dig -x 94.237.39.137 
```
##### analyzed:
- The PTR record maps the IP address 94.237.39.137  to the domain name 94-237-39-137.fi-hel1.upcloud.host.
This suggests the IP is hosted by UpCloud (witch is true)

#### 2. Small Organization: `porinpaahtimo.fi`
```bash
host porinpaahtimo.fi
```
- porinpaahtimo.fi has address 34.160.232.167

```bash
dig porinpaahtimo.fi any
```
<img width="637" height="387" alt="image" src="https://github.com/user-attachments/assets/91894909-5897-4a6a-ad88-19ff5b46e5bf" />

- Analysis:
The DNS response contains one A record pointing porinpaahtimo.fi to the IPv4 address 34.160.232.167.
No MX, TXT, NS, or other record types were returned in this ANY query, which might indicate minimal DNS configuration or server restrictions on ANY queries.

```bash
host 34.160.232.167
```
- 167.232.160.34.in-addr.arpa domain name pointer 167.232.160.34.bc.googleusercontent.com.


##### analyzed:
- Most likely hosted by Google

#### 3. Major Provider: `lttstore.com`
```bash
Host www.lttstore.com
```
- www.lttstore.com has address 104.26.3.206
- www.lttstore.com has address 172.67.71.64
- www.lttstore.com has address 104.26.2.206
- www.lttstore.com has IPv6 address 2606:4700:20::ac43:4740
- www.lttstore.com has IPv6 address 2606:4700:20::681a:2ce
- www.lttstore.com has IPv6 address 2606:4700:20::681a:3ce

```bash
dig -x 172.67.71.64
```
##### analyzed:
- The query returned status: NXDOMAIN, meaning no PTR (reverse DNS lookup) record exists for IP 172.67.71.64
- All of the IP's are hosted on cloudflare servers.


---


## Sources and References

* `man dig`
* `man host`
* `man`
* `[Tero Karvinen – (https://terokarvinen.com/linux-palvelimet/) *Posted: n.d.*`

```


